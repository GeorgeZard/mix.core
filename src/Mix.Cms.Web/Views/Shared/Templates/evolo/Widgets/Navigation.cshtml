@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService

@{
    string culture = ViewBag.culture;
    var topCates = await Mix.Cms.Lib.MixCmsHelper.GetNavigation("top", ViewBag.culture, Url);
    var social = await Mix.Cms.Lib.MixCmsHelper.GetNavigation("social", ViewBag.culture, Url);

    string assetFolder = Mix.Cms.Lib.MixCmsHelper.GetAssetFolder(ViewBag.culture);
}

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
    <!-- Text Logo - Use this if you don't have a graphic logo -->
    <!-- <a class="navbar-brand logo-text page-scroll" href="index.html">Evolo</a> -->
    <!-- Image Logo -->
    <a class="navbar-brand logo-image" href="/@ViewBag.culture"><img src="@(Mix.Cms.Lib.Services.MixService.GetConfig<string>("Logo", ViewBag.culture))" alt="alternative"></a>

    <!-- Mobile Menu Toggle Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-awesome fas fa-bars"></span>
        <span class="navbar-toggler-awesome fas fa-times"></span>
    </button>
    <!-- end of mobile menu toggle button -->

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
            @if (topCates != null) {
                @foreach (var menu in topCates.MenuItems) {
                    if (menu.MenuItems != null && menu.MenuItems.Count > 0) {
                        <!-- Dropdown Menu -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle page-scroll" href="#@menu.Title" id="navbarDropdown" role="button" aria-haspopup="true" aria-expanded="false">@menu.Title</a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                @foreach (var sub_menu in menu.MenuItems) {
                                    <a class="dropdown-item" href="@sub_menu.Uri"><span class="item-text">@sub_menu.Title</span></a>
                                    <div class="dropdown-items-divide-hr"></div>
                                }
                            </div>
                        </li>
                        <!-- end of dropdown menu -->
                    } else {
                        <li class="nav-item">
                            <a class="nav-link page-scroll" href="@menu.Uri">@menu.Title <span class="sr-only">(current)</span></a>
                        </li>
                    }
                }
            }

        </ul>
        <span class="nav-item social-icons">
            @if (social != null) {
                foreach (var item in social.MenuItems) {
                    <span class="fa-stack">
                        <a href="@item.Uri" title="@item.Title" target="@item.Target">
                            <i class="fas fa-circle fa-stack-2x"></i>
                            <i class="@item.Classes"></i>
                        </a>
                    </span>
                }
            }


        </span>
    </div>
</nav> <!-- end of navbar -->
<!-- end of navigation -->
